<!--
 * @Author: your name
 * @Date: 2020-03-16 19:34:16
 * @LastEditTime: 2020-03-17 09:22:12
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /studyCode/js高级和es6笔记/html/封装fetch.html
 -->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>

    </style>
</head>

<body>

    <script>
        // 封装
        class EasyHttp {
            get(url) {
                return new Promise((resolve, reject) => {
                    fetch(url)
                        .then(res => res.json())
                        .then(data => resolve(data))
                        .catch(err => reject(err))
                })

            }

            post(url, data) {
                return new Promise((resolve, reject) => {
                    fetch(url, {
                            method: 'POST',
                            headers: {
                                'Content-type': 'application/json'
                            },
                            body: JSON.stringify(data)
                        })
                        .then(res => res.json())
                        .then(data => resolve(data))
                        .catch(err => reject(err))
                })
            }
            // 更新  put
            put(url, data) {
                return new Promise((resolve, reject) => {
                    fetch(url, {
                            method: 'PUT',
                            headers: {
                                'Content-type': 'application/json'
                            },
                            body: JSON.stringify(data)
                        })
                        .then(res => res.json())
                        .then(data => resolve(data))
                        .catch(err => reject(err))
                })
            }

            // delete
            delete(url) {
                return new Promise((resolve, reject) => {
                    fetch(url, {
                            method: 'DELETE',
                            headers: {
                                'Content-type': 'application/json'
                            },
                        })
                        .then(res => res.json())
                        .then(data => resolve('数据删除成功'))
                        .catch(err => reject(err))
                })

            }
        }

        // 使用
        const http = new EasyHttp;

        // 请求数据
        // http.get("https://api.github.com/users")
        //     .then((data) => {
        //         console.log(data);
        //     })
        //     .catch(err => console.log(err))

        const data = {
            login: 'aaaa',
            id: 788
        }

        // http.post("https://api.github.com/users", data)
        //     .then((data) => console.log(data))
        //     .catch(err => console.log(err))


        // put
        // http.put("https://api.github.com/users/2", data)
        //     .then(data => console.log(data))
        //     .catch(err => console.log(err))

        // delete
        // http.delete("https://api.github.com/users/2")
        //     .then(data => console.log(data))
        //     .catch(err => console.log(err))

        console.log(Math.sign(111));
        console.log(Math.sign(-111));
        console.log(Math.sign(0));
        console.log(Math.pow(2,54));
        console.log(Math.pow(2,53));
        console.log(Math.pow(2,53)===Math.pow(2,53)+1);
        console.log(Number.MAX_SAFE_INTEGER);
        
        console.log((0.1*100+0.2*100)/100);
        console.log(.1+.2!=.3);
        
        
        
        
        
    </script>
</body>

</html>